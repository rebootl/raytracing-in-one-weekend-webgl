<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
    <script src="main.js" defer></script>
    <script src="https://webglfundamentals.org/webgl/resources/webgl-utils.js"></script>
    <script src="https://webglfundamentals.org/webgl/resources/m4.js"></script>
    <script src="https://webglfundamentals.org/webgl/resources/m3.js"></script>
  </head>
  <body>

	<style>
		body {
			font-family: monospace;
			background-color: #b3bbc3;
		}
		.canvas {
			display: flex;
			justify-content: center;
			margin-bottom: 8px;
		}
		.controls {
			display: flex;
			flex-flow: column;
			gap: 8px;
			margin-bottom: 8px;
		}
		input {
			width: 50px;
		}
		input[type=range] {
			width: 120px;
		}
		.footer, .header {
			display: flex;
			justify-content: center;
		  text-align: center;
		}
		.header {
			text-decoration: underline;
			margin-bottom: 8px;
		}
	</style>

	<div class="header">
		<small>Raytracing in one Weekend - in WebGL</small>
	</div>

	<div class="canvas">
  	<canvas id="canvas" height="400" width="600"></canvas>
	</div>

	<div class="controls">
		<button onclick="reset();">Start / Reset</button>
		<button onclick="toggle();">Pause / Continue</button>
		<div>Frames (Antialiasing): <span class="niter">0</span></div>
		<div>
			Canvas size:
			<input id="cw" placeholder="width" value="600"></input>
			<input id="ch" placeholder="height" value="400"></input>
		</div>
		<div>
			Camera look from:
			<input id="clfx" placeholder="x" value="0"></input>
			<input id="clfy" placeholder="y" value="1"></input>
			<input id="clfz" placeholder="z" value="5"></input>
			look at:
			<input id="clax" placeholder="x" value="0"></input>
			<input id="clay" placeholder="y" value="1"></input>
			<input id="claz" placeholder="z" value="0"></input>
			fov:
			<input id="fov" placeholder="fov" value="30"></input>
		</div>
		<div>
			Aperture:
			<input id="ap" type="range" min="0.0" max="1.0" step="0.01" value="0.0">
			Ambient light:
			<input id="amb" type="range" min="0.0" max="1.0" step="0.01" value="0.5">
		</div>
		<div>
			Number of balls | Emitting:
			<input id="nbemi" placeholder="n" value="5"></input>
			Diffuse:
			<input id="nbdif" placeholder="n" value="5"></input>
			Metal:
			<input id="nbmet" placeholder="n" value="5"></input>
			Glass:
			<input id="nbgla" placeholder="n" value="5"></input>
		</div>
		<div>
			Background:
  		<input type="radio" id="bgd" name="bg" value="default" checked>
  		<label for="bgd">Default</label>
			<input type="radio" id="bgc" name="bg" value="color">
			<label for="bgc">Color</label>
			R <input id="bgr" type="range" min="0.0" max="1.0" step="0.02" value="0"></input>
			G <input id="bgg" type="range" min="0.0" max="1.0" step="0.02" value="0"></input>
			B <input id="bgb" type="range" min="0.0" max="1.0" step="0.02" value="0"></input>
		</div>
		<div>
			Floor color:
			R <input id="flr" type="range" min="0.0" max="1.0" step="0.02" value="0.5"></input>
			G <input id="flg" type="range" min="0.0" max="1.0" step="0.02" value="0.5"></input>
			B <input id="flb" type="range" min="0.0" max="1.0" step="0.02" value="0.5"></input>
		</div>
		<button onclick="save();">Save image!</button>
	</div>

	<div class="footer">
		<small>
			Works best on Firefox. Chromium shows blue dots, not clear why. Also works on ipad. Totally broken on Android... :)<br>
			<a href="https://github.com/rebootl/raytracing-in-one-weekend-webgl/">Code <3</a>
		</small>
	</div>

  </body>
</html>
